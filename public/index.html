<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Coluna.io</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body { margin: 0; background: #1a1a1a; }
    canvas { display: block; background: #222; margin: auto; }
    #hud, #skills, #rebornPanel, #quests {
      position: absolute;
      font-family: Arial, sans-serif;
      user-select: none;
      color: #fff;
      z-index: 10;
    }
    #hud { top: 16px; left: 20px; font-size: 18px; display: flex; gap: 14px; align-items: center; }
    #eventMsg {
      position: absolute;
      top: 28%; left: 0; right: 0;
      text-align: center; color: #fff; font-size: 38px; font-weight: bold;
      text-shadow: 2px 2px 16px #000, 0 0 12px #fff;
      z-index: 30; display: none; pointer-events: none;
      font-family: Arial, sans-serif;
    }
    #dmgReduceIcon {
      position: absolute; top: 14px; right: 32px;
      background: #1a2945cc; border-radius: 50%;
      border: 3px solid #58ffb7; width: 58px; height: 58px;
      box-shadow: 0 0 16px #14f9; z-index: 19; display: none;
      align-items: center; justify-content: center;
    }
    #dmgReduceIcon span { font-size: 31px; color: #58ffb7; font-weight: bold; text-shadow: 1px 1px 5px #0f4, 0 0 10px #000; display: block; }
    #xpbar-ct { width: 320px; height: 18px; background: #444; border-radius: 10px; overflow: hidden; border: 2px solid #67d2ff; }
    #xpbar { height: 100%; background: linear-gradient(90deg,#1fd1f9,#88e8a0); width: 0%; border-radius: 10px; transition: width 0.22s cubic-bezier(.4,2.3,.2,1); }
    #deathMsg {
      position: absolute; top: 40%; left: 0; right: 0;
      color: #fff; font-size: 48px; font-weight: bold; text-align: center;
      text-shadow: 2px 2px 16px #000, 0 0 12px #46f9;
      z-index: 20; display: none; font-family: Arial, sans-serif;
    }
    #conquests { position: absolute; right: 18px; bottom: 30px; font-size: 18px; color: #f1f189; z-index: 25; text-align: right; line-height: 1.3; }
    #skills {
      top: 80px; left: 20px;
      background: rgba(30,30,40,0.97);
      padding: 18px 26px;
      border-radius: 16px;
      border: 2px solid #345;
      display: none;
      z-index: 12;
      min-width: 280px;
    }
    button.skill-btn, #openSkills, #openReborn {
      padding: 6px 12px; border-radius: 7px; border: 1px solid #67d2ff;
      background: #26303a; color: #dff; font-size: 15px; cursor: pointer;
    }
    button.skill-btn:disabled { background: #363d44; color: #444; cursor: not-allowed; }
    .skills-grid { display: grid; grid-template-columns: 1fr; gap: 8px; }
    .skill-row { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
    #quests {
      top: 110px; left: 20px; width: 280px;
      background: rgba(28,28,28,0.9); border: 1px solid #444; border-radius: 10px;
      padding: 10px 12px; line-height: 1.4;
    }
    .quest-title { font-weight: bold; margin-bottom: 6px; color:#9ad0ff; }
    .quest-item { display: flex; gap: 8px; align-items: center; }
    .quest-dot { width: 10px; height: 10px; border-radius: 50%; background: #999; }
    .quest-dot.active { background: #ffd166; box-shadow: 0 0 8px #ffd166; }
    .quest-dot.done { background: #2ecc71; box-shadow: 0 0 8px #2ecc71; }
    #rebornPanel {
      right: 20px; top: 80px;
      background: rgba(20,20,28,0.97); border: 2px solid #5a6c8f; border-radius: 16px;
      padding: 18px 20px; display: none; min-width: 340px; z-index: 15;
    }
    #rebornPanel h3 { margin: 0 0 8px 0; }
    .reborn-row { margin-top: 8px; }
    .reborn-big { font-weight: 800; text-transform: uppercase; letter-spacing: 1px; cursor: default; padding: 8px 12px; border-radius: 10px; border: 1px solid #888; display: inline-block; }
    .glow { animation: glowpulse 1s ease-in-out infinite; box-shadow: 0 0 10px #fff; border-color:#fff; }
    @keyframes glowpulse { 0%{filter:drop-shadow(0 0 0px #fff)}50%{filter:drop-shadow(0 0 8px #fff)}100%{filter:drop-shadow(0 0 0px #fff)} }
    .choice-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
    .choice { background:#222b; border:1px solid #555; border-radius:10px; padding:10px; cursor:pointer; }
    .choice:hover { border-color:#8fd; box-shadow:0 0 10px #8fd5; }
    .small { font-size: 12px; opacity: 0.8; }

    /* Badge de Reborns ao lado do bot√£o */
    #rebornBadge { font-size: 15px; opacity:.9; padding: 2px 8px; border:1px solid #5a6c8f; border-radius: 8px; background:#1e2634; }
  
    #rankPanel { position: fixed; right: 24px; top: 84px; background: rgba(18,18,24,0.97); border: 2px solid #6aa3ff; border-radius: 16px; padding: 16px 18px; display: none; min-width: 360px; max-height: 80vh; overflow: auto; z-index: 9999; color:#e8f4ff; }
    #rankPanel .title { font-weight: 700; margin-bottom: 8px; color:#b8d7ff; }
    #rankPanel .row { margin: 6px 0; }
    #rankPanel .pbar { height: 10px; background:#333; border:1px solid #6aa3ff; border-radius: 8px; overflow: hidden; }
    #rankPanel .pbar>div { height:100%; background: linear-gradient(90deg,#6aa3ff,#7ee57e); width:0%; }
    #rankPanel .small { font-size: 12px; opacity:.9; }
    #openRank.glow { animation: glowpulse 1s ease-in-out infinite; }
    
  </style>
</head>
<body>
<div id="eventMsg"></div>

  
  <div id="classHud" style="position:absolute; left:20px; top:64px; z-index:11; color:#fff; font-family:Arial;">
    <div id="classInfo" style="margin-bottom:6px;">Classe: <span id="className">-</span></div>
    <div id="classBarCt" style="width:220px;height:14px;background:#333;border:1px solid #88e; border-radius:8px; overflow:hidden;">
      <div id="classBar" style="height:100%;width:0%;background:linear-gradient(90deg,#8ff,#7f7);"></div>
    </div>
    <div style="margin-top:6px;font-size:13px;opacity:.85;">Skills [1]=Modo [2]=Tiro [3]=Buff [4]=Ultimate</div>
  </div>

<canvas id="game"></canvas>

  <div id="hud">
    <span>HP: <b id="hp">0/0</b></span>
    <span>Level: <b id="level">1</b></span>
    <span>Pontua√ß√£o: <b id="score">0</b></span>
    <button id="openSkills">Habilidades (<span id="points">0</span> pts)</button>
    <button id="openReborn">Reborn System</button>
    <button id="openRank" title="Sistema de Rank (Desbloqueia no Reborn 1)">Rank System</button>
    <span id="rebornBadge" title="Quantos Reborns voc√™ j√° fez">‚≠ê x0 / 3</span>
    <div id="xpbar-ct"><div id="xpbar"></div></div>
  </div>

  <div id="skills"></div>
  <div id="eventMsg"></div>
  <div id="dmgReduceIcon"><span title="Redu√ß√£o permanente de dano">üõ°Ô∏è<br><span style="font-size:17px;">-20%</span></span></div>
  <div id="conquests"></div>
  <div id="quests"></div>
  <div id="rebornPanel"></div>
  <div id="rankPanel"></div>
  <div id="deathMsg"></div>

  <script type="module" src="rankSystem.js"></script>
  <script type="module" src="game.js"></script>

  <div id="classPanel" style="position:absolute; right:20px; top:350px; background:rgba(20,20,28,.97); border:2px solid #5a6c8f; border-radius:16px; padding:16px; display:none; min-width:360px; color:#fff; z-index:16;">
    <h3>Upgrade de Classe</h3>
    <div id="classDesc" style="font-size:13px; opacity:.9; margin:6px 0 10px 0;">Escolha uma subclasse da sua √°rvore atual.</div>
    <div class="choice-grid">
      <div class="choice" id="pickBerserker"><b>Berserker</b><div class="small">Barra de F√∫ria; cura 0.25%/tiro na Sede</div></div>
      <div class="choice" id="pickLadino"><b>Ladino</b><div class="small">Furtividade, tiros teleguiados</div></div>
      <div class="choice" id="pickRageTank"><b>RageTank</b><div class="small">Amplifica tiros com Escudo</div></div>
      <div class="choice" id="pickPaladino"><b>Paladino</b><div class="small">Barra de F√©; stun amplo</div></div>
    </div>
    <div style="margin-top:8px;font-size:12px;opacity:.8;">Dispon√≠vel ap√≥s Reborn 2.</div>
  </div>

</body>
</html>
